# **/lib/screens**

Каждый отдельный файл хранит соответствующий класс или классы, описывающие работу и внешний вид отдельных страниц (экранов) приложения.
Классы страниц без состояния являются потомками класса `StatelessWidget`. Более сложные страницы, интерфейс которых зависит от контекста, являются потомками `StatefulWidget`. Метод `build()` отрисовывает страницу на экран монитора.

<br/>

## Navigator
Переход между страницами в приложении реализован с помощью Stateful-виджета `Navigator`. Данный объект содержит текущий стек навигации по экранам-виджетам и предоставляет методы для изменения этого состояния.
Переход на новый экран (на языке Flutter - route) происходит с помощью вызова метода `push()`, возвращение на предыдущий - `pop()`.

<br/>

### game.dart

Объект, возвращаемый, функцией `build()` класса в данном файле обернут в `RawKeyboardListener`, это позволяет замечать нажатые на клавиатуре клавиши в процессе просмотра данной страницы. В данном случае нажатие определенных клавиш используется для управления направлением движения змейки по полю.

<br/>

### login.dart

Класс, отвечающий за состояние страницы Login, при первом переходе на страницу показывает поля для заполнения информации, которая необходима для аутентификации пользователя в приложении.

При регистрации новой учетной записи или попытке зайти в аккаунт, созданный ранее, в случае корректности введенных данных будет отправлен соответствующий HTTP запрос на сервер с помощью асинхронной функции `signInUser()`. Данная функция возвращает значение, которое может соответствовать успеху или неудаче посланного запроса, в виде объекта типа `Future`. В зависимости от значения результата запроса на экран печатается виджет `successWidget` или `tryAgainWidget` при помощи соответствующих методов класса. В случае успеха в структуре Config сохраняются значения, описывающие пользователя в данной сессии приложения. Значение Config::token используется для последующих HTTP запросов на сервер для загрузки таблицы результатов на странице Scoreboard или при обновлении количества баллов при завершении игры на странице Game.

<br/>

### scoreboard.dart

В данном файле определены классы, связанные с презентацией таблицы результатов.

В случае авторизованного пользователя при загрузке страницы будет сделан запрос на сервер, успешный результат которого вернет массив пользователей и их баллов в игре. В классе определены вспомогательные функции: `fetchUsers()`, посылающая HTTP запрос на сервер, `makeUsersList()`, преобразовывающая ответ сервера из строки в формате Json в массив структур `User`, `getTopTen()`, выделяющая подмассив структур `User` с наивысшими результатами, и `chooseColor()`, с помощью которой результат просматривающего таблицу пользователя будет подсвечен отдельным цветом.

Неавторизованный пользователь будет видеть `loggedOutScreen()`.
